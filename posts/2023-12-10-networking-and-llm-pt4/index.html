<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>Networking and LLM in the Age of AI — Pt. IV: Knowledge Retrieval using RAG | My Journey to AI and Networking</title>
<meta name="keywords" content="">
<meta name="description" content="Using RAG to Enforce ACI Policy Standards
Networking management can be complex and depends on accurate information to take necessary actions. Taking the wrong action can be costly.
Photo by Susan Q Yin on Unsplash
This article is part of a series. Here are the links to the previous articles
Part I — Introduction Part II — Exploring Basic Interactions Part III — In-Depth Analysis of ChatGPT’s Responses In this article, we’ll first briefly discuss the basics of RAG, the process, and the components that makeup RAG.">
<meta name="author" content="Peter Zhang">
<link rel="canonical" href="http://zhangineer.net/posts/2023-12-10-networking-and-llm-pt4/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.fc220c15db4aef0318bbf30adc45d33d4d7c88deff3238b23eb255afdc472ca6.css" integrity="sha256-/CIMFdtK7wMYu/MK3EXTPU18iN7/MjiyPrJVr9xHLKY=" rel="preload stylesheet" as="style">
<link rel="icon" href="http://zhangineer.net/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="http://zhangineer.net/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="http://zhangineer.net/favicon-32x32.png">
<link rel="apple-touch-icon" href="http://zhangineer.net/apple-touch-icon.png">
<link rel="mask-icon" href="http://zhangineer.net/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" hreflang="en" href="http://zhangineer.net/posts/2023-12-10-networking-and-llm-pt4/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --code-block-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript>
  

<meta property="og:title" content="Networking and LLM in the Age of AI — Pt. IV: Knowledge Retrieval using RAG" />
<meta property="og:description" content="Using RAG to Enforce ACI Policy Standards
Networking management can be complex and depends on accurate information to take necessary actions. Taking the wrong action can be costly.
Photo by Susan Q Yin on Unsplash
This article is part of a series. Here are the links to the previous articles
Part I — Introduction Part II — Exploring Basic Interactions Part III — In-Depth Analysis of ChatGPT’s Responses In this article, we’ll first briefly discuss the basics of RAG, the process, and the components that makeup RAG." />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://zhangineer.net/posts/2023-12-10-networking-and-llm-pt4/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-12-10T20:16:15-04:00" />
<meta property="article:modified_time" content="2023-12-10T20:16:15-04:00" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Networking and LLM in the Age of AI — Pt. IV: Knowledge Retrieval using RAG"/>
<meta name="twitter:description" content="Using RAG to Enforce ACI Policy Standards
Networking management can be complex and depends on accurate information to take necessary actions. Taking the wrong action can be costly.
Photo by Susan Q Yin on Unsplash
This article is part of a series. Here are the links to the previous articles
Part I — Introduction Part II — Exploring Basic Interactions Part III — In-Depth Analysis of ChatGPT’s Responses In this article, we’ll first briefly discuss the basics of RAG, the process, and the components that makeup RAG."/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Posts",
      "item": "http://zhangineer.net/posts/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "Networking and LLM in the Age of AI — Pt. IV: Knowledge Retrieval using RAG",
      "item": "http://zhangineer.net/posts/2023-12-10-networking-and-llm-pt4/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Networking and LLM in the Age of AI — Pt. IV: Knowledge Retrieval using RAG",
  "name": "Networking and LLM in the Age of AI — Pt. IV: Knowledge Retrieval using RAG",
  "description": "Using RAG to Enforce ACI Policy Standards\nNetworking management can be complex and depends on accurate information to take necessary actions. Taking the wrong action can be costly.\nPhoto by Susan Q Yin on Unsplash\nThis article is part of a series. Here are the links to the previous articles\nPart I — Introduction Part II — Exploring Basic Interactions Part III — In-Depth Analysis of ChatGPT’s Responses In this article, we’ll first briefly discuss the basics of RAG, the process, and the components that makeup RAG.",
  "keywords": [
    
  ],
  "articleBody": "Using RAG to Enforce ACI Policy Standards\nNetworking management can be complex and depends on accurate information to take necessary actions. Taking the wrong action can be costly.\nPhoto by Susan Q Yin on Unsplash\nThis article is part of a series. Here are the links to the previous articles\nPart I — Introduction Part II — Exploring Basic Interactions Part III — In-Depth Analysis of ChatGPT’s Responses In this article, we’ll first briefly discuss the basics of RAG, the process, and the components that makeup RAG. Then, we’ll observe ChatGPT and review its response in each step.\nRAG (Retrieval Augmented Generation) Large Language Models (LLMs) like ChatGPT have a fundamental limitation: they possess a fixed knowledge cutoff date and don’t continually learn like humans. Moreover, they cannot answer queries about private, unpublished data. While function calls in LLMs can fetch real-time information via REST APIs from other applications, this approach falls short when searching proprietary documents.\nRAG addresses this gap effectively. It retrieves relevant information from a document or a collection of documents, making it particularly useful in contexts where proprietary information is crucial. This article will showcase how RAG can be used to pull configuration guidelines from documents, aiding in auditing configuration changes before deployment. The retrieval process is automatic via function calls triggered by ChatGPT upon detecting a configuration change request.\nRAG-enhanced responses use the information as an added layer of context to the existing instructions.\nThe diagram below illustrates the components and their interactions; note the Pinecone vector database as a critical new element.\nRAG components\nVector Database Vector databases are integral to RAG’s functionality. They store vectors — numerical representations of words (e.g., [0.1, 0.3, 0.123]) — essential in making text documents machine-readable. Common document formats like MS Word, PDF, Markdown, or plain text files must be converted into these vectors.\nWhile direct retrieval from documents is possible, using a vector database is more efficient and cost-effective. Continually converting documents into vectors for each retrieval is unsustainable and expensive.\nThe goal during retrieval is to extract only the most pertinent information in response to a user query, not the entire document.\nFor this demonstration, we utilize Pinecone, a cloud-based vector database, to showcase the power and efficiency of this approach.\nUse Cases Let’s explore several practical use cases where RAG can be applied in networking:\nNetworking Configuration Autocorrect: Before implementing configuration changes, verifying adherence to specific standards is crucial. This could involve ensuring that naming conventions are followed, network interfaces are set up according to a designated template or verifying that a new firewall ACL aligns with the security posture. The goal is to either confirm the user’s compliance with these standards or to provide recommendations when deviations occur.\nDistributed Information Retrieval: Network engineers often need to access guidelines and policy standards quickly for configuration changes. These policies may be scattered across various documents, databases, or different sections within the same document. Utilizing RAG, we can consolidate this search into a single query, retrieving only the most pertinent information to aid the engineer in completing their task efficiently.\nTroubleshooting Steps Retrieval: In cases where network operators receive alerts for network events, immediate access to relevant troubleshooting documentation is vital. RAG can be used to locate and retrieve these documents quickly. Furthermore, troubleshooting steps can be carried out by machines following these documents. This not only expedites the resolution process but also ensures accuracy. (We will explore this scenario in greater depth in future blogs.)\nThis article will focus on demonstrating use case #1 — Networking Configuration Autocorrect in a Cisco ACI environment.\nExample Document Used The documentation below details our ACI naming convention and configuration guidelines.\nWe will specifically showcase configuring a new Bridge Domain and assess how effectively ChatGPT can recommend the correct course of action to a user based on these guidelines.\n# Cisco ACI Configuration Guidelines for LLM This guideline is to help facilitate autonomous agents of LLM This document describes the policy and standards to be followed when configuring the Cisco ACI fabric. All LLM configurations must strictly follow this guideline. This is a living document and will be updated frequently. ## Glossary and Abbreviations * TN = Tenant * AP = Application Profile * EPG = Endpoint Group * BD = Bridge Domain ## Naming Conventions * All new objects that the user wants to create shall be in all caps, no CamelCase or lowercase allowed. * All new objects that the user wants to create shall be concatenated with underscore `_` only, `-`, or `.` shall not be used * When numbers are involved, digit paddings must be used, Bridge Domains uses 4 digits padding, whereas interface numbers uses 2 digit padding. * When registering new Leafs, must follow the following format `LEAF` ## Creating new Bridge Domains * BDs always follow the naming convention of `BD_VLAN`, where `vlan_id` should be a 4 digit, with 0s as paddings if less than 4 digit * Unicast routing must be enabled for all BDs, there are no layer2 BDs in the environment * All BDs must be associated with the L3Out `OSPF_L3OUT` for advertising the routes out * All BDs must have `ARP flooding enabled` and `L2unknown unicast set to flood` to compensate for silent hosts * All BDs must have GARP detection enabled * All subnets must have `public` and `primary` flags checked ## Creating new EPGs * Before creating new EPGs, ensure that the Tenant, AP already exists * EPGs should always follow the naming convention of `EPG_VLAN` with paddings of 0s as well * A domain must be associated first, we use `VMM_DOM` for VMWare, and `VMM_PHYS` for static paths * All EPGs must have `preferred group` set as `included` Preparation Before querying the document, a couple of preparatory steps are necessary:\nLoading the Documentation: The document is first uploaded to Pinecone vector databases. We employ a “chunking” technique where a Markdown document is broken down by each section. Depending on the use case, chunking can also be done by sentence or paragraph.\nDefining System Instructions and Function Definitions: To use RAG dynamically, we introduce an additional function call, tailored for scenarios where a network administrator submits a configuration change request.\nFunction Call Definition get_configuration_guideline_function = create_function_config( name=\"get_configuration_guideline\", description=\"Get guidelines for ACI policy standards,\", properties={ \"query\": { \"type\": \"string\", \"description\": \"query from the network admin\" } }, required=[\"query\"] ) The actual function to be called def get_configuration_guideline(query): # create an index for query, from the database named \"aci-kb\" index = create_pinecone_index(\"aci-kb\") # query the index, and return the result in plain text for us. context = query_vector_store(index, query) # This ensures ChatGPT does not \"forget\" other instructions. return f\"\"\" Think step by step when answering user query following the configuration guidelines If no guideline provided for a specific policy, do not proceed and let the user know a policy is missing Step 1. Follow system instruction Step 2. Follow additional instruction: {context} Step 3. Answer the query:\\n \\t{query} \"\"\" Flow Sequence User Prompt Initiation: The user begins by entering a prompt\nRequest Assessment and Doc Retrieval: ChatGPT evaluates if the request is configuration change related. Upon confirmation, it proceeds to fetch the relevant sections from configuration guidelines.\nCompliance Check and Recommendations: ChatGPT evaluates if the user’s proposed configuration complies with the guidelines. Non-compliant configurations will trigger recommendations for correction.\nConfiguration Update and Feedback: The updated configuration is applied to Cisco ACI once the user approves. The results are then reported back to the user.\nAPI Call Sequence Flow\nChatGPT Response Analysis User Request How can I assist you today? =\u003e add vlan5 to tenant demo use vrf vrf_demo, subnet 192.168.1.1/24, subnet should be shared across vrf To summarize the user request — add a new bridge domain with the following settings:\nTenant: demo BD: vlan5 VRF: vrf_demo subnet: 192.168.1.1/24 subnet properties: public and shared No additional details were provided. However, based on our configuration guidelines, the following settings should also be configured:\nEnable Unicast Routing Enable GARP Subnet must have the primary flag Associate any new Bridge Domain with OSPF_L3OUT Adhere to strict naming conventions Relevant Information Retrieved The below response is output from get_configuration_guideline function call and sent to ChatGPT as additional context.\n==Response== Making function call.... { \"name\": \"get_configuration_guideline\", \"arguments\": \"{\\n \\\"query\\\": \\\"add vlan5 to tenant demo use vrf vrf_demo, subnet 192.168.1.1/24, subnet should be shared across vrf\\\"\\n}\" } Think step by step when answering user query following the configuration guidelines If no guideline provided for a specific policy, do not proceed and let the user know a policy is missing Step 1. Follow system instruction Step 2. Follow additional instruction: * Before creating new EPGs, ensure that the Tenant, AP already exists * EPGs should always follow the naming convention of `EPG_VLAN` with paddings of 0s as well * A domain must be associated first, we use `VMM_DOM` for VMWare, and `VMM_PHYS` for static paths * All EPGs must have `preferred group` set as `included` * BDs always follow the naming convention of `BD_VLAN`, where `vlan_id` should be a 4 digit, with 0s as paddings if less than 4 digit * Unicast routing must be enabled for all BDs, there are no layer2 BDs in the environment * All BDs must be associated with the L3Out `OSPF_L3OUT` for advertising the routes out * All BDs must have `ARP flooding enabled` and `L2unknown unicast set to flood` to compensate for silent hosts * All BDs must have GARP detection enabled * All subnets must have `public` and `primary` flags checked * TN = Tenant * AP = Application Profile * EPG = Endpoint Group * BD = Bridge Domain Step 3. Answer the query: add vlan5 to tenant demo use vrf vrf_demo, subnet 192.168.1.1/24, subnet should be shared across vrf Observations:\nCore information about Bridge Domain was accurately retrieved.\nAdditional EPG-related information was also retrieved, likely due to the mention of vlan5.\nThe vector search accuracy could be improved, as it fetched some irrelevant sections — such as the glossary section.\nImportant: Since the document was initially split up and stored by section, matching similar text within a section retrieves the entire section.\nWith these guidelines retrieved, let’s examine ChatGPT’s response.\nChatGPT’s Recommendation Based on the configuration guidelines, here are the configurations to be made: * Tenant Name: demo * Bridge Domain Name: BD_VLAN0005 * VRF Name: vrf_demo * Unicast Routing: yes * GARP Mode: garp * L2 Unknown Unicast: flood * ARP Flood: yes * L3Outs: OSPF_L3OUT * Subnets: 192.168.1.1/24|yes|public+shared Please confirm if you would like to proceed with these configurations. ==End of response== Highlights:\nChatGPT did not mistakenly capitalize the Tenant name demo nor the VRF name vrf_demo. We’ll further discuss later why this was highlighted. The Bridge Domain name was appropriately converted to uppercase with zeros padding the VLAN ID. All additional parameters not specified by the user were adequately added according to the guideline. ChatGPT correctly inferred that the subnet setting should be both public and shared. Lastly, ChatGPT sought user confirmation before executing the changes. Result: The configuration was successfully applied.\nHow can I assist you today? =\u003e yes ==Response== Making function call.... { \"name\": \"create_bd\", \"arguments\": \"{\\n \\\"tenantName\\\": \\\"demo\\\",\\n \\\"bdName\\\": \\\"BD_VLAN0005\\\",\\n \\\"vrfName\\\": \\\"vrf_demo\\\",\\n \\\"unicastRoute\\\": \\\"yes\\\",\\n \\\"garp\\\": \\\"garp\\\",\\n \\\"L2UnknownUnicast\\\": \\\"flood\\\",\\n \\\"arpFlood\\\": \\\"yes\\\",\\n \\\"l3outs\\\": \\\"OSPF_L3OUT\\\",\\n \\\"subnets\\\": \\\"192.168.1.1/24|yes|public+shared\\\"\\n}\" } FUNCTION CALL RESULT: (200, {'totalCount': '0', 'imdata': []}) The configuration has been successfully applied. The new bridge domain BD_VLAN0005 has been added to the tenant demo. ==End of response== Information Queries and RAG Lastly, for information queries, no configuration guidelines should be retrieved as illustrated below:\nHow can I assist you today? =\u003e what's my fabric health score ==Response== Making function call.... { \"name\": \"get_fabric_health\", \"arguments\": \"{}\" } FUNCTION CALL RESULT: {} I'm sorry, but I didn't get any results for the fabric health score. ==End of response== How can I assist you today? =\u003e can you get me all the BDs with ur enabled ==Response== Making function call.... { \"name\": \"get_bd\", \"arguments\": \"{\\n \\\"unicastRoute\\\": \\\"yes\\\"\\n}\" } FUNCTION CALL RESULT: [{'fvBD': {'attributes': {'OptimizeWanBandwidth': 'no', 'annotation': '', 'arpFlood': 'no', 'bcastP': '225.0.177.192', 'childAction': '', 'configIssues': '', 'descr': '', 'dn': 'uni/tn-mgmt/BD-inb', 'enableRogueExceptMac': 'no', 'epClear': 'no', 'epMoveDetectMode': '', 'extMngdBy': '', 'hostBasedRouting': 'no', 'intersiteBumTrafficAllow': 'no', 'intersiteL2Stretch': 'no', 'ipLearning': 'yes', 'ipv6McastAllow': 'no', 'lcOwn': 'local', 'limitIpLearnToSubnets': 'yes', 'llAddr': '::', 'mac': '00:22:BD:F8:19:FF', 'mcastARPDrop': 'yes', 'mcastAllow': 'no', 'modTs': '2023-11-04T17:52:40.449+00:00', 'monPolDn': 'uni/tn-common/monepg-default', 'mtu': 'inherit', 'multiDstPktAct': 'bd-flood', 'name': 'inb', 'nameAlias': '', 'ownerKey': '', 'ownerTag': '', 'pcTag': '16386', 'scope': '2818048', 'seg': '16318374', 'status': '', 'type': 'regular', 'uid': '0', 'unicastRoute': 'yes', 'unkMacUcastAct': 'proxy', 'unkMcastAct': 'flood', 'userdom': 'all', 'v6unkMcastAct': 'flood', 'vmac': 'not-applicable'}}}, {'fvBD': {'attributes': {'OptimizeWanBandwidth': 'no', 'annotation': '', 'arpFlood': 'no', 'bcastP': '225.0.39.96', 'childAction': '', 'configIssues': '', 'descr': '', 'dn': 'uni/tn-common/BD-default', 'enableRogueExceptMac': 'no', 'epClear': 'no', 'epMoveDetectMode': '', 'extMngdBy': '', 'hostBasedRouting': 'no', 'intersiteBumTrafficAllow': 'no', 'intersiteL2Stretch': 'no', 'ipLearning': 'yes', 'ipv6McastAllow': 'no', 'lcOwn': 'local', 'limitIpLearnToSubnets': 'yes', 'llAddr': '::', 'mac': '00:22:BD:F8:19:FF', 'mcastARPDrop': 'yes', 'mcastAllow': 'no', 'modTs': '2023-11-04T17:52:40.450+00:00', 'monPolDn': 'uni/tn-common/monepg-default', 'mtu': 'inherit', 'multiDstPktAct': 'bd-flood', 'name': 'default', 'nameAlias': '', 'ownerKey': '', 'ownerTag': '', 'pcTag': '32770', 'scope': '2654208', 'seg': '15826914', 'status': '', 'type': 'regular', 'uid': '0', 'unicastRoute': 'yes', 'unkMacUcastAct': 'proxy', 'unkMcastAct': 'flood', 'userdom': 'all', 'v6unkMcastAct': 'flood', 'vmac': 'not-applicable'}}}, {'fvBD': {'attributes': {'OptimizeWanBandwidth': 'no', 'annotation': '', 'arpFlood': 'no', 'bcastP': '225.1.41.144', 'childAction': '', 'configIssues': '', 'descr': '', 'dn': 'uni/tn-infra/BD-ave-ctrl', 'enableRogueExceptMac': 'no', 'epClear': 'no', 'epMoveDetectMode': '', 'extMngdBy': '', 'hostBasedRouting': 'no', 'intersiteBumTrafficAllow': 'no', 'intersiteL2Stretch': 'no', 'ipLearning': 'yes', 'ipv6McastAllow': 'no', 'lcOwn': 'local', 'limitIpLearnToSubnets': 'yes', 'llAddr': '::', 'mac': '00:22:BD:F8:19:FF', 'mcastARPDrop': 'yes', 'mcastAllow': 'no', 'modTs': '2023-11-04T17:52:40.450+00:00', 'monPolDn': 'uni/tn-common/monepg-default', 'mtu': 'inherit', 'multiDstPktAct': 'bd-flood', 'name': 'ave-ctrl', 'nameAlias': '', 'ownerKey': '', 'ownerTag': '', 'pcTag': '32771', 'scope': '2424832', 'seg': '16482194', 'status': '', 'type': 'regular', 'uid': '0', 'unicastRoute': 'yes', 'unkMacUcastAct': 'proxy', 'unkMcastAct': 'flood', 'userdom': 'all', 'v6unkMcastAct': 'flood', 'vmac': 'not-applicable'}}}, {'fvBD': {'attributes': {'OptimizeWanBandwidth': 'no', 'annotation': '', 'arpFlood': 'no', 'bcastP': '225.0.0.16', 'childAction': '', 'configIssues': '', 'descr': '', 'dn': 'uni/tn-infra/BD-default', 'enableRogueExceptMac': 'no', 'epClear': 'no', 'epMoveDetectMode': '', 'extMngdBy': '', 'hostBasedRouting': 'no', 'intersiteBumTrafficAllow': 'no', 'intersiteL2Stretch': 'no', 'ipLearning': 'yes', 'ipv6McastAllow': 'no', 'lcOwn': 'local', 'limitIpLearnToSubnets': 'yes', 'llAddr': '::', 'mac': '00:22:BD:F8:19:FF', 'mcastARPDrop': 'yes', 'mcastAllow': 'no', 'modTs': '2023-11-04T17:52:25.606+00:00', 'monPolDn': 'uni/tn-common/monepg-default', 'mtu': 'inherit', 'multiDstPktAct': 'bd-flood', 'name': 'default', 'nameAlias': '', 'ownerKey': '', 'ownerTag': '', 'pcTag': '49154', 'scope': '16777199', 'seg': '16777209', 'status': '', 'type': 'regular', 'uid': '0', 'unicastRoute': 'yes', 'unkMacUcastAct': 'proxy', 'unkMcastAct': 'flood', 'userdom': 'all', 'v6unkMcastAct': 'flood', 'vmac': 'not-applicable'}}}, {'fvBD': {'attributes': {'OptimizeWanBandwidth': 'no', 'annotation': '', 'arpFlood': 'no', 'bcastP': '225.0.45.128', 'childAction': '', 'configIssues': '', 'descr': '', 'dn': 'uni/tn-common/BD-BD_VLAN0005', 'enableRogueExceptMac': 'no', 'epClear': 'no', 'epMoveDetectMode': '', 'extMngdBy': '', 'hostBasedRouting': 'no', 'intersiteBumTrafficAllow': 'no', 'intersiteL2Stretch': 'no', 'ipLearning': 'yes', 'ipv6McastAllow': 'no', 'lcOwn': 'local', 'limitIpLearnToSubnets': 'yes', 'llAddr': '::', 'mac': '00:22:BD:F8:19:FF', 'mcastARPDrop': 'yes', 'mcastAllow': 'no', 'modTs': '2023-11-29T07:46:21.447+00:00', 'monPolDn': 'uni/tn-common/monepg-default', 'mtu': 'inherit', 'multiDstPktAct': 'bd-flood', 'name': 'BD_VLAN0005', 'nameAlias': '', 'ownerKey': '', 'ownerTag': '', 'pcTag': 'any', 'scope': '0', 'seg': '16187318', 'status': '', 'type': 'regular', 'uid': '15374', 'unicastRoute': 'yes', 'unkMacUcastAct': 'proxy', 'unkMcastAct': 'flood', 'userdom': ':all:', 'v6unkMcastAct': 'flood', 'vmac': 'not-applicable'}}}, {'fvBD': {'attributes': {'OptimizeWanBandwidth': 'no', 'annotation': '', 'arpFlood': 'yes', 'bcastP': '225.0.150.16', 'childAction': '', 'configIssues': '', 'descr': '', 'dn': 'uni/tn-demo/BD-demo_bd', 'enableRogueExceptMac': 'no', 'epClear': 'no', 'epMoveDetectMode': '', 'extMngdBy': '', 'hostBasedRouting': 'no', 'intersiteBumTrafficAllow': 'no', 'intersiteL2Stretch': 'no', 'ipLearning': 'yes', 'ipv6McastAllow': 'no', 'lcOwn': 'local', 'limitIpLearnToSubnets': 'yes', 'llAddr': '::', 'mac': '00:22:BD:F8:19:FF', 'mcastARPDrop': 'yes', 'mcastAllow': 'no', 'modTs': '2023-12-01T07:12:16.706+00:00', 'monPolDn': 'uni/tn-common/monepg-default', 'mtu': 'inherit', 'multiDstPktAct': 'bd-flood', 'name': 'demo_bd', 'nameAlias': '', 'ownerKey': '', 'ownerTag': '', 'pcTag': '16389', 'scope': '3047424', 'seg': '16711542', 'status': '', 'type': 'regular', 'uid': '15374', 'unicastRoute': 'yes', 'unkMacUcastAct': 'proxy', 'unkMcastAct': 'flood', 'userdom': ':all:', 'v6unkMcastAct': 'flood', 'vmac': 'not-applicable'}}}, {'fvBD': {'attributes': {'OptimizeWanBandwidth': 'no', 'annotation': '', 'arpFlood': 'yes', 'bcastP': '225.0.192.48', 'childAction': '', 'configIssues': '', 'descr': '', 'dn': 'uni/tn-demo/BD-BD_VLAN0005', 'enableRogueExceptMac': 'no', 'epClear': 'no', 'epMoveDetectMode': 'garp', 'extMngdBy': '', 'hostBasedRouting': 'no', 'intersiteBumTrafficAllow': 'no', 'intersiteL2Stretch': 'no', 'ipLearning': 'yes', 'ipv6McastAllow': 'no', 'lcOwn': 'local', 'limitIpLearnToSubnets': 'yes', 'llAddr': '::', 'mac': '00:22:BD:F8:19:FF', 'mcastARPDrop': 'yes', 'mcastAllow': 'no', 'modTs': '2023-12-01T09:24:08.731+00:00', 'monPolDn': 'uni/tn-common/monepg-default', 'mtu': 'inherit', 'multiDstPktAct': 'bd-flood', 'name': 'BD_VLAN0005', 'nameAlias': '', 'ownerKey': '', 'ownerTag': '', 'pcTag': 'any', 'scope': '0', 'seg': '15105996', 'status': '', 'type': 'regular', 'uid': '15374', 'unicastRoute': 'yes', 'unkMacUcastAct': 'flood', 'unkMcastAct': 'flood', 'userdom': ':all:', 'v6unkMcastAct': 'flood', 'vmac': 'not-applicable'}}}] Here are the Bridge Domains (BDs) with Unicast Routing (UR) enabled: 1. BD Name: inb, Tenant: mgmt, DN: uni/tn-mgmt/BD-inb 2. BD Name: default, Tenant: common, DN: uni/tn-common/BD-default 3. BD Name: ave-ctrl, Tenant: infra, DN: uni/tn-infra/BD-ave-ctrl 4. BD Name: default, Tenant: infra, DN: uni/tn-infra/BD-default 5. BD Name: BD_VLAN0005, Tenant: common, DN: uni/tn-common/BD-BD_VLAN0005 6. BD Name: demo_bd, Tenant: demo, DN: uni/tn-demo/BD-demo_bd 7. BD Name: BD_VLAN0005, Tenant: demo, DN: uni/tn-demo/BD-BD_VLAN0005 Please note that the DN (Distinguished Name) is the unique identifier for each BD in the ACI fabric. Challenges The Main Challenge Despite the smooth appearance of the demonstrated process, one of the most time-consuming challenges was guiding ChatGPT to correctly understand and apply exceptions in the context of configuration guidelines.\nConsider the following statements from our configuration guidelines:\n* All new objects that the user wants to create shall be in all caps, no CamelCase or lowercase allowed. * All new objects that the user wants to create shall be in all caps, no CamelCase or lowercase allowed. e.g. VRF_PROD The only difference between these statements is the addition of e.g. VRF_PROD in the second guideline. This seemingly minor variation led ChatGPT to capitalize both Tenant and VRF names even though they are existing objects, as shown in the following interaction:\nHow can I assist you today? =\u003e add vlan5 to tenant demo use vrf vrf_demo, subnet 192.168.1.1/24, subnet should be shared across vrf ==Response== Making function call.... { \"name\": \"get_configuration_guideline\", \"arguments\": \"{\\n\\\"query\\\": \\\"add vlan5 to tenant demo use vrf vrf_demo, subnet 192.168.1.1/24, subnet should be shared across vrf\\\"\\n}\" } Think step by step when answering user query following the configuration guidelines If no guideline provided for a specific policy, do not proceed and let the user know a policy is missing Step 1. Follow system instruction Step 2. Follow additional instruction: * All new objects that the user wants to create shall be in all caps, no CamelCase or lowercase allowed. e.g. VRF_PROD Based on the configuration guidelines, here is the configuration to add vlan5 to tenant demo using vrf vrf_demo with subnet 192.168.1.1/24: * Tenant Name: DEMO \u003c\u003c\u003c\u003c\u003c\u003c\u003c\u003c\u003c\u003c\u003c\u003c\u003c * Bridge Domain Name: BD_VLAN0005 * VRF Name: VRF_DEMO \u003c\u003c\u003c\u003c\u003c\u003c\u003c\u003c\u003c\u003c\u003c\u003c\u003c * Unicast Routing: Yes * GARP: Enabled * L2 Unknown Unicast: Flood * ARP Flooding: Yes * L3Out: OSPF_L3OUT * Subnets: 192.168.1.1/24|yes|public+shared Interestingly and frustratingly, we can guide and reason with ChatGPT to correct its mistake. As shown below:\nMe: Why are the Tenant’s name and VRF’s name capitalized?\nChatGPT: The configuration guidelines specify that all new objects that the user wants to create should be in all caps. This includes the Tenant name and VRF name. This is a standard naming convention to maintain consistency and avoid confusion. It also helps in easily identifying and differentiating between different objects in the network.\nMe: but Tenant and VRF are existing objects, aren’t they? The configuration guideline should only apply to new objects\nChatGPT: You’re correct, my apologies for the confusion. The configuration guidelines apply to new objects being created. If the Tenant and VRF are existing objects, we should use their existing names. Let’s correct the configuration:\n* Tenant Name: demo * Bridge Domain Name: BD_VLAN0005 * VRF Name: vrf_demo * Unicast Routing: Yes * GARP: Enabled * L2 Unknown Unicast: Flood * ARP Flooding: Yes * L3Out: OSPF_L3OUT * Subnets: 192.168.1.1/24|yes|public+shared Please confirm if you would like to proceed with this configuration. ChatGPT was quick to recognize its mistake. However, various approaches to prevent this misunderstanding initially failed. Why?\nThis issue likely stems from how ChatGPT has been trained and its consequent interpretation of context. During training scenarios where creating new objects might have involved more capitalization examples, it can lead the model to generalize on such a pattern.\nTherefore, in our case, the inclusion of e.g. VRF_PROD might have been perceived as a reinforcement to apply capitalization broadly, leading to capitalizing existing objects incorrectly.\nThis highlights the critical importance of understanding how Generative AI models work and implementing technical safeguards. Such measures are vital when training examples might not adequately address specific contextual subtleties.\nOther Minor Challenges Inconsistencies when Applying Complex Configurations: ChatGPT sometimes struggles with complex configuration requests. For example, when creating a subnet shared across VRFs, ChatGPT occasionally omits the shared flag.\nInconsistencies in Adhering Global Instructions: ChatGPT didn’t always follow global instructions as expected when provided with configuration guidelines. It required more explicit steps:\nStep 1. Follow system instruction Step 2. Follow additional instruction: Lack of Document Retrieval Accuracy: There is significant room to improve document retrieval accuracy. Various algorithms can be applied for this purpose, and strategies for chunking and embedding are also crucial. Conclusion In this article we delved into RAG, vector embeddings, and vector databases, illustrating their use in extending LLM capabilities for enforcing ACI policy standards. We demonstrated how RAG can retrieve relevant information from vector databases, align user intentions with policy standards, and offer valuable recommendations. This methodology reduces hallucinations and enhances configuration accuracy while retaining user-friendliness.\nOne Final Thought AI isn’t here to replace us but to augment and enhance our capabilities. The synergy between human input and AI is indispensable, especially in crafting solutions catering to a specific knowledge domain or enterprise environment. I encourage all engineers to familiarize themselves with LLM prompt engineering and instruction tuning. This knowledge is vital to effectively guiding these models. I hope you found this series informative and enlightening. Thank you for joining me on this journey!\n",
  "wordCount" : "3517",
  "inLanguage": "en",
  "datePublished": "2023-12-10T20:16:15-04:00",
  "dateModified": "2023-12-10T20:16:15-04:00",
  "author":{
    "@type": "Person",
    "name": "Peter Zhang"
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "http://zhangineer.net/posts/2023-12-10-networking-and-llm-pt4/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "My Journey to AI and Networking",
    "logo": {
      "@type": "ImageObject",
      "url": "http://zhangineer.net/favicon.ico"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="http://zhangineer.net/" accesskey="h" title="My Journey to AI and Networking (Alt + H)">My Journey to AI and Networking</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="http://zhangineer.net/archives/" title="Archives">
                    <span>Archives</span>
                </a>
            </li>
            <li>
                <a href="http://zhangineer.net/aboutme/" title="About Me">
                    <span>About Me</span>
                </a>
            </li>
            <li>
                <a href="https://youtu.be/WfKfwiGQts8" title="Project Demo">
                    <span>Project Demo</span>&nbsp;
                    <svg fill="none" shape-rendering="geometricPrecision" stroke="currentColor" stroke-linecap="round"
                        stroke-linejoin="round" stroke-width="2.5" viewBox="0 0 24 24" height="12" width="12">
                        <path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"></path>
                        <path d="M15 3h6v6"></path>
                        <path d="M10 14L21 3"></path>
                    </svg>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    <div class="breadcrumbs"><a href="http://zhangineer.net/">Home</a>&nbsp;»&nbsp;<a href="http://zhangineer.net/posts/">Posts</a></div>
    <h1 class="post-title entry-hint-parent">
      Networking and LLM in the Age of AI — Pt. IV: Knowledge Retrieval using RAG
    </h1>
    <div class="post-meta"><span title='2023-12-10 20:16:15 -0400 -0400'>December 10, 2023</span>&nbsp;·&nbsp;Peter Zhang

</div>
  </header> 
  <div class="post-content"><p><em>Using RAG to Enforce ACI Policy Standards</em></p>
<blockquote>
<p><em>Networking management can be complex and depends on accurate information to take necessary actions. Taking the wrong action can be costly.</em></p>
</blockquote>
<p><img loading="lazy" src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*gjL2CtbRgFCP6I84" alt="banner"  />
 Photo by <a href="https://unsplash.com/@syinq?utm_source=medium&amp;utm_medium=referral">Susan Q Yin</a> on <a href="https://unsplash.com/?utm_source=medium&amp;utm_medium=referral">Unsplash</a></p>
<p>This article is part of a series. Here are the links to the previous articles</p>
<ul>
<li>Part I — <a href="../2023-10-07-Networking-and-LLM-pt1/">Introduction</a></li>
<li>Part II — <a href="../2023-10-29-Networking-and-LLM-pt2/">Exploring Basic Interactions</a></li>
<li>Part III — <a href="../2023-11-22-Networking-and-LLM-pt3/">In-Depth Analysis of ChatGPT’s Responses</a></li>
</ul>
<p>In this article, we’ll first briefly discuss the basics of RAG, the process, and the components that makeup RAG. Then, we’ll observe ChatGPT and review its response in each step.</p>
<h2 id="rag-retrieval-augmented-generation">RAG (Retrieval Augmented Generation)<a hidden class="anchor" aria-hidden="true" href="#rag-retrieval-augmented-generation">#</a></h2>
<p>Large Language Models (LLMs) like ChatGPT have a fundamental limitation: they possess a fixed knowledge cutoff date and don’t continually learn like humans. Moreover, they cannot answer queries about private, unpublished data. While function calls in LLMs can fetch real-time information via REST APIs from other applications, this approach falls short when searching proprietary documents.</p>
<p>RAG addresses this gap effectively. It retrieves relevant information from a document or a collection of documents, making it particularly useful in contexts where proprietary information is crucial. This article will showcase how RAG can be used to pull configuration guidelines from documents, aiding in auditing configuration changes before deployment. The retrieval process is automatic via function calls triggered by ChatGPT upon detecting a configuration change request.</p>
<p>RAG-enhanced responses use the information as an added layer of context to the existing instructions.</p>
<p>The diagram below illustrates the components and their interactions; note the Pinecone vector database as a critical new element.</p>
<p><img loading="lazy" src="components.png" alt="components"  />
 RAG components</p>
<h3 id="vector-database">Vector Database<a hidden class="anchor" aria-hidden="true" href="#vector-database">#</a></h3>
<p>Vector databases are integral to RAG’s functionality. They store vectors — numerical representations of words (e.g., [0.1, 0.3, 0.123]) — essential in making text documents machine-readable. Common document formats like MS Word, PDF, Markdown, or plain text files must be converted into these vectors.</p>
<p>While direct retrieval from documents is possible, using a vector database is more efficient and cost-effective. Continually converting documents into vectors for each retrieval is unsustainable and expensive.</p>
<blockquote>
<p><em>The goal during retrieval is to extract only the most pertinent information in response to a user query, not the entire document.</em></p>
</blockquote>
<p>For this demonstration, we utilize <a href="pinecone.io">Pinecone</a>, a cloud-based vector database, to showcase the power and efficiency of this approach.</p>
<h2 id="use-cases">Use Cases<a hidden class="anchor" aria-hidden="true" href="#use-cases">#</a></h2>
<p>Let’s explore several practical use cases where RAG can be applied in networking:</p>
<ol>
<li>
<p><strong>Networking Configuration Autocorrect</strong>: Before implementing configuration changes, verifying adherence to specific standards is crucial. This could involve ensuring that naming conventions are followed, network interfaces are set up according to a designated template or verifying that a new firewall ACL aligns with the security posture. The goal is to either confirm the user’s compliance with these standards or to provide recommendations when deviations occur.</p>
</li>
<li>
<p><strong>Distributed Information Retrieval</strong>: Network engineers often need to access guidelines and policy standards quickly for configuration changes. These policies may be scattered across various documents, databases, or different sections within the same document. Utilizing RAG, we can consolidate this search into a single query, retrieving only the most pertinent information to aid the engineer in completing their task efficiently.</p>
</li>
<li>
<p><strong>Troubleshooting Steps Retrieval</strong>: In cases where network operators receive alerts for network events, immediate access to relevant troubleshooting documentation is vital. RAG can be used to locate and retrieve these documents quickly. Furthermore, troubleshooting steps can be carried out by machines following these documents. This not only expedites the resolution process but also ensures accuracy. (We will explore this scenario in greater depth in future blogs.)</p>
</li>
</ol>
<p>This article will focus on demonstrating use case #1 — Networking Configuration Autocorrect in a Cisco ACI environment.</p>
<h2 id="example-document-used">Example Document Used<a hidden class="anchor" aria-hidden="true" href="#example-document-used">#</a></h2>
<p>The documentation below details our ACI naming convention and configuration guidelines.</p>
<p>We will specifically showcase configuring a new Bridge Domain and assess how effectively ChatGPT can recommend the correct course of action to a user based on these guidelines.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span># Cisco ACI Configuration Guidelines for LLM
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>This guideline is to help facilitate autonomous agents of LLM  
</span></span><span style="display:flex;"><span>This document describes the policy and standards to be followed when configuring the Cisco ACI fabric.  
</span></span><span style="display:flex;"><span>All LLM configurations must strictly follow this guideline. This is a living document and will be updated frequently.
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>## Glossary and Abbreviations
</span></span><span style="display:flex;"><span>* TN = Tenant
</span></span><span style="display:flex;"><span>* AP = Application Profile
</span></span><span style="display:flex;"><span>* EPG = Endpoint Group
</span></span><span style="display:flex;"><span>* BD = Bridge Domain
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>## Naming Conventions
</span></span><span style="display:flex;"><span>* All new objects that the user wants to create shall be in all caps, no CamelCase or lowercase allowed.
</span></span><span style="display:flex;"><span>* All new objects that the user wants to create shall be concatenated with underscore `_` only, `-`, or `.` shall not be used
</span></span><span style="display:flex;"><span>* When numbers are involved, digit paddings must be used, Bridge Domains uses 4 digits padding, whereas interface numbers uses 2 digit padding.
</span></span><span style="display:flex;"><span>* When registering new Leafs, must follow the following format `LEAF&lt;number&gt;`
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>## Creating new Bridge Domains
</span></span><span style="display:flex;"><span>* BDs always follow the naming convention of `BD_VLAN&lt;vlan_id&gt;`, where `vlan_id` should be a 4 digit, with 0s as paddings if less than 4 digit
</span></span><span style="display:flex;"><span>* Unicast routing must be enabled for all BDs, there are no layer2 BDs in the environment
</span></span><span style="display:flex;"><span>* All BDs must be associated with the L3Out `OSPF_L3OUT` for advertising the routes out
</span></span><span style="display:flex;"><span>* All BDs must have `ARP flooding enabled` and `L2unknown unicast set to flood` to compensate for silent hosts
</span></span><span style="display:flex;"><span>* All BDs must have GARP detection enabled
</span></span><span style="display:flex;"><span>* All subnets must have `public` and `primary` flags checked
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>## Creating new EPGs
</span></span><span style="display:flex;"><span>* Before creating new EPGs, ensure that the Tenant, AP already exists
</span></span><span style="display:flex;"><span>* EPGs should always follow the naming convention of `EPG_VLAN&lt;vlan_id&gt;` with paddings of 0s as well
</span></span><span style="display:flex;"><span>* A domain must be associated first, we use `VMM_DOM` for VMWare, and `VMM_PHYS` for static paths
</span></span><span style="display:flex;"><span>* All EPGs must have `preferred group` set as `included`
</span></span></code></pre></div><h2 id="preparation">Preparation<a hidden class="anchor" aria-hidden="true" href="#preparation">#</a></h2>
<p>Before querying the document, a couple of preparatory steps are necessary:</p>
<ol>
<li>
<p><strong>Loading the Documentation</strong>: The document is first uploaded to Pinecone vector databases. We employ a “chunking” technique where a Markdown document is broken down by each section. Depending on the use case, chunking can also be done by sentence or paragraph.</p>
</li>
<li>
<p><strong>Defining System Instructions and Function Definitions</strong>: To use RAG dynamically, we introduce an additional function call, tailored for scenarios where a network administrator submits a configuration change request.</p>
</li>
</ol>
<h3 id="function-call-definition">Function Call Definition<a hidden class="anchor" aria-hidden="true" href="#function-call-definition">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>get_configuration_guideline_function = create_function_config(
</span></span><span style="display:flex;"><span>    name=&#34;get_configuration_guideline&#34;,
</span></span><span style="display:flex;"><span>    description=&#34;Get guidelines for ACI policy standards,&#34;,
</span></span><span style="display:flex;"><span>    properties={
</span></span><span style="display:flex;"><span>        &#34;query&#34;: {
</span></span><span style="display:flex;"><span>            &#34;type&#34;: &#34;string&#34;,
</span></span><span style="display:flex;"><span>            &#34;description&#34;: &#34;query from the network admin&#34;
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    },
</span></span><span style="display:flex;"><span>    required=[&#34;query&#34;]
</span></span><span style="display:flex;"><span>)
</span></span></code></pre></div><h3 id="the-actual-function-to-be-called">The actual function to be called<a hidden class="anchor" aria-hidden="true" href="#the-actual-function-to-be-called">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>def get_configuration_guideline(query):
</span></span><span style="display:flex;"><span>    # create an index for query, from the database named &#34;aci-kb&#34;
</span></span><span style="display:flex;"><span>    index = create_pinecone_index(&#34;aci-kb&#34;)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    # query the index, and return the result in plain text for us.
</span></span><span style="display:flex;"><span>    context = query_vector_store(index, query)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    # This ensures ChatGPT does not &#34;forget&#34; other instructions.
</span></span><span style="display:flex;"><span>    return f&#34;&#34;&#34;
</span></span><span style="display:flex;"><span>    Think step by step when answering user query following the configuration guidelines
</span></span><span style="display:flex;"><span>    If no guideline provided for a specific policy, do not proceed and let the user know a policy is missing
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    Step 1. Follow system instruction
</span></span><span style="display:flex;"><span>    Step 2. Follow additional instruction: {context}
</span></span><span style="display:flex;"><span>    Step 3. Answer the query:\n \t{query}
</span></span><span style="display:flex;"><span>    &#34;&#34;&#34;
</span></span></code></pre></div><h2 id="flow-sequence">Flow Sequence<a hidden class="anchor" aria-hidden="true" href="#flow-sequence">#</a></h2>
<ol>
<li>
<p><strong>User Prompt Initiation</strong>: The user begins by entering a prompt</p>
</li>
<li>
<p><strong>Request Assessment and Doc Retrieval</strong>: ChatGPT evaluates if the request is configuration change related. Upon confirmation, it proceeds to fetch the relevant sections from configuration guidelines.</p>
</li>
<li>
<p><strong>Compliance Check and Recommendations</strong>: ChatGPT evaluates if the user’s proposed configuration complies with the guidelines. Non-compliant configurations will trigger recommendations for correction.</p>
</li>
<li>
<p><strong>Configuration Update and Feedback</strong>: The updated configuration is applied to Cisco ACI once the user approves. The results are then reported back to the user.</p>
</li>
</ol>
<p><img loading="lazy" src="llm4-LogicalFlow.png" alt="LogicalFlow"  />
 API Call Sequence Flow</p>
<h2 id="chatgpt-response-analysis">ChatGPT Response Analysis<a hidden class="anchor" aria-hidden="true" href="#chatgpt-response-analysis">#</a></h2>
<h3 id="user-request">User Request<a hidden class="anchor" aria-hidden="true" href="#user-request">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>How can I assist you today? =&gt; add vlan5 to tenant demo use vrf vrf_demo, subnet 192.168.1.1/24, subnet should be shared across vrf
</span></span></code></pre></div><p>To summarize the user request — add a new bridge domain with the following settings:</p>
<ul>
<li>Tenant: demo</li>
<li>BD: vlan5</li>
<li>VRF: vrf_demo</li>
<li>subnet: 192.168.1.1/24</li>
<li>subnet properties: public and shared</li>
</ul>
<p>No additional details were provided. However, based on our configuration guidelines, the following settings should also be configured:</p>
<ul>
<li>Enable Unicast Routing</li>
<li>Enable GARP</li>
<li>Subnet must have the primary flag</li>
<li>Associate any new Bridge Domain with <code>OSPF_L3OUT</code></li>
<li>Adhere to strict naming conventions</li>
</ul>
<h3 id="relevant-information-retrieved">Relevant Information Retrieved<a hidden class="anchor" aria-hidden="true" href="#relevant-information-retrieved">#</a></h3>
<p>The below response is output from <code>get_configuration_guideline</code> function call and sent to ChatGPT as additional context.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>==Response==
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Making function call....  {
</span></span><span style="display:flex;"><span>  &#34;name&#34;: &#34;get_configuration_guideline&#34;,
</span></span><span style="display:flex;"><span>  &#34;arguments&#34;: &#34;{\n  \&#34;query\&#34;: \&#34;add vlan5 to tenant demo use vrf vrf_demo, subnet 192.168.1.1/24, subnet should be shared across vrf\&#34;\n}&#34;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    Think step by step when answering user query following the configuration guidelines
</span></span><span style="display:flex;"><span>    If no guideline provided for a specific policy, do not proceed and let the user know a policy is missing
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    Step 1. Follow system instruction
</span></span><span style="display:flex;"><span>    Step 2. Follow additional instruction: 
</span></span><span style="display:flex;"><span>      * Before creating new EPGs, ensure that the Tenant, AP already exists
</span></span><span style="display:flex;"><span>      * EPGs should always follow the naming convention of `EPG_VLAN&lt;vlan_id&gt;` with paddings of 0s as well
</span></span><span style="display:flex;"><span>      * A domain must be associated first, we use `VMM_DOM` for VMWare, and `VMM_PHYS` for static paths
</span></span><span style="display:flex;"><span>      * All EPGs must have `preferred group` set as `included`
</span></span><span style="display:flex;"><span>      * BDs always follow the naming convention of `BD_VLAN&lt;vlan_id&gt;`, where `vlan_id` should be a 4 digit, with 0s as paddings if less than 4 digit
</span></span><span style="display:flex;"><span>      * Unicast routing must be enabled for all BDs, there are no layer2 BDs in the environment
</span></span><span style="display:flex;"><span>      * All BDs must be associated with the L3Out `OSPF_L3OUT` for advertising the routes out
</span></span><span style="display:flex;"><span>      * All BDs must have `ARP flooding enabled` and `L2unknown unicast set to flood` to compensate for silent hosts
</span></span><span style="display:flex;"><span>      * All BDs must have GARP detection enabled
</span></span><span style="display:flex;"><span>      * All subnets must have `public` and `primary` flags checked
</span></span><span style="display:flex;"><span>      * TN = Tenant
</span></span><span style="display:flex;"><span>      * AP = Application Profile
</span></span><span style="display:flex;"><span>      * EPG = Endpoint Group
</span></span><span style="display:flex;"><span>      * BD = Bridge Domain
</span></span><span style="display:flex;"><span>    Step 3. Answer the query:
</span></span><span style="display:flex;"><span>        add vlan5 to tenant demo use vrf vrf_demo, subnet 192.168.1.1/24, subnet should be shared across vrf
</span></span></code></pre></div><p><strong>Observations</strong>:</p>
<ul>
<li>
<p>Core information about Bridge Domain was accurately retrieved.</p>
</li>
<li>
<p>Additional EPG-related information was also retrieved, likely due to the mention of vlan5.</p>
</li>
<li>
<p>The vector search accuracy could be improved, as it fetched some irrelevant sections — such as the glossary section.</p>
</li>
<li>
<p><strong>Important</strong>: Since the document was initially split up and stored by section, matching similar text within a section retrieves the entire section.</p>
</li>
</ul>
<p>With these guidelines retrieved, let’s examine ChatGPT’s response.</p>
<h3 id="chatgpts-recommendation">ChatGPT&rsquo;s Recommendation<a hidden class="anchor" aria-hidden="true" href="#chatgpts-recommendation">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>Based on the configuration guidelines, here are the configurations to be made:
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>* Tenant Name: demo
</span></span><span style="display:flex;"><span>* Bridge Domain Name: BD_VLAN0005
</span></span><span style="display:flex;"><span>* VRF Name: vrf_demo
</span></span><span style="display:flex;"><span>* Unicast Routing: yes
</span></span><span style="display:flex;"><span>* GARP Mode: garp
</span></span><span style="display:flex;"><span>* L2 Unknown Unicast: flood
</span></span><span style="display:flex;"><span>* ARP Flood: yes
</span></span><span style="display:flex;"><span>* L3Outs: OSPF_L3OUT
</span></span><span style="display:flex;"><span>* Subnets: 192.168.1.1/24|yes|public+shared
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Please confirm if you would like to proceed with these configurations.
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>==End of response==
</span></span></code></pre></div><p><strong>Highlights</strong>:</p>
<ul>
<li>ChatGPT did not mistakenly capitalize the Tenant name demo nor the VRF name vrf_demo. We&rsquo;ll further discuss later why this was highlighted.</li>
<li>The Bridge Domain name was appropriately converted to uppercase with zeros padding the VLAN ID.</li>
<li>All additional parameters not specified by the user were adequately added according to the guideline.</li>
<li>ChatGPT correctly inferred that the subnet setting should be both public and shared.</li>
<li>Lastly, ChatGPT sought user confirmation before executing the changes.</li>
</ul>
<p><strong>Result</strong>: The configuration was successfully applied.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>How can I assist you today? =&gt; yes
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>==Response==
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Making function call....  {
</span></span><span style="display:flex;"><span>  &#34;name&#34;: &#34;create_bd&#34;,
</span></span><span style="display:flex;"><span>  &#34;arguments&#34;: &#34;{\n  \&#34;tenantName\&#34;: \&#34;demo\&#34;,\n  \&#34;bdName\&#34;: \&#34;BD_VLAN0005\&#34;,\n  \&#34;vrfName\&#34;: \&#34;vrf_demo\&#34;,\n  \&#34;unicastRoute\&#34;: \&#34;yes\&#34;,\n  \&#34;garp\&#34;: \&#34;garp\&#34;,\n  \&#34;L2UnknownUnicast\&#34;: \&#34;flood\&#34;,\n  \&#34;arpFlood\&#34;: \&#34;yes\&#34;,\n  \&#34;l3outs\&#34;: \&#34;OSPF_L3OUT\&#34;,\n  \&#34;subnets\&#34;: \&#34;192.168.1.1/24|yes|public+shared\&#34;\n}&#34;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>FUNCTION CALL RESULT:  (200, {&#39;totalCount&#39;: &#39;0&#39;, &#39;imdata&#39;: []})
</span></span><span style="display:flex;"><span>The configuration has been successfully applied. The new bridge domain BD_VLAN0005 has been added to the tenant demo.
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>==End of response==
</span></span></code></pre></div><h2 id="information-queries-andrag">Information Queries and RAG<a hidden class="anchor" aria-hidden="true" href="#information-queries-andrag">#</a></h2>
<p>Lastly, for information queries, no configuration guidelines should be  retrieved as illustrated below:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>How can I assist you today? =&gt; what&#39;s my fabric health score
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>==Response==
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Making function call....  {
</span></span><span style="display:flex;"><span>  &#34;name&#34;: &#34;get_fabric_health&#34;,
</span></span><span style="display:flex;"><span>  &#34;arguments&#34;: &#34;{}&#34;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>FUNCTION CALL RESULT:  {}
</span></span><span style="display:flex;"><span>I&#39;m sorry, but I didn&#39;t get any results for the fabric health score.
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>==End of response==
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>How can I assist you today? =&gt; can you get me all the BDs with ur enabled
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>==Response==
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Making function call....  {
</span></span><span style="display:flex;"><span>  &#34;name&#34;: &#34;get_bd&#34;,
</span></span><span style="display:flex;"><span>  &#34;arguments&#34;: &#34;{\n  \&#34;unicastRoute\&#34;: \&#34;yes\&#34;\n}&#34;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>FUNCTION CALL RESULT:  [{&#39;fvBD&#39;: {&#39;attributes&#39;: {&#39;OptimizeWanBandwidth&#39;: &#39;no&#39;, &#39;annotation&#39;: &#39;&#39;, &#39;arpFlood&#39;: &#39;no&#39;, &#39;bcastP&#39;: &#39;225.0.177.192&#39;, &#39;childAction&#39;: &#39;&#39;, &#39;configIssues&#39;: &#39;&#39;, &#39;descr&#39;: &#39;&#39;, &#39;dn&#39;: &#39;uni/tn-mgmt/BD-inb&#39;, &#39;enableRogueExceptMac&#39;: &#39;no&#39;, &#39;epClear&#39;: &#39;no&#39;, &#39;epMoveDetectMode&#39;: &#39;&#39;, &#39;extMngdBy&#39;: &#39;&#39;, &#39;hostBasedRouting&#39;: &#39;no&#39;, &#39;intersiteBumTrafficAllow&#39;: &#39;no&#39;, &#39;intersiteL2Stretch&#39;: &#39;no&#39;, &#39;ipLearning&#39;: &#39;yes&#39;, &#39;ipv6McastAllow&#39;: &#39;no&#39;, &#39;lcOwn&#39;: &#39;local&#39;, &#39;limitIpLearnToSubnets&#39;: &#39;yes&#39;, &#39;llAddr&#39;: &#39;::&#39;, &#39;mac&#39;: &#39;00:22:BD:F8:19:FF&#39;, &#39;mcastARPDrop&#39;: &#39;yes&#39;, &#39;mcastAllow&#39;: &#39;no&#39;, &#39;modTs&#39;: &#39;2023-11-04T17:52:40.449+00:00&#39;, &#39;monPolDn&#39;: &#39;uni/tn-common/monepg-default&#39;, &#39;mtu&#39;: &#39;inherit&#39;, &#39;multiDstPktAct&#39;: &#39;bd-flood&#39;, &#39;name&#39;: &#39;inb&#39;, &#39;nameAlias&#39;: &#39;&#39;, &#39;ownerKey&#39;: &#39;&#39;, &#39;ownerTag&#39;: &#39;&#39;, &#39;pcTag&#39;: &#39;16386&#39;, &#39;scope&#39;: &#39;2818048&#39;, &#39;seg&#39;: &#39;16318374&#39;, &#39;status&#39;: &#39;&#39;, &#39;type&#39;: &#39;regular&#39;, &#39;uid&#39;: &#39;0&#39;, &#39;unicastRoute&#39;: &#39;yes&#39;, &#39;unkMacUcastAct&#39;: &#39;proxy&#39;, &#39;unkMcastAct&#39;: &#39;flood&#39;, &#39;userdom&#39;: &#39;all&#39;, &#39;v6unkMcastAct&#39;: &#39;flood&#39;, &#39;vmac&#39;: &#39;not-applicable&#39;}}}, {&#39;fvBD&#39;: {&#39;attributes&#39;: {&#39;OptimizeWanBandwidth&#39;: &#39;no&#39;, &#39;annotation&#39;: &#39;&#39;, &#39;arpFlood&#39;: &#39;no&#39;, &#39;bcastP&#39;: &#39;225.0.39.96&#39;, &#39;childAction&#39;: &#39;&#39;, &#39;configIssues&#39;: &#39;&#39;, &#39;descr&#39;: &#39;&#39;, &#39;dn&#39;: &#39;uni/tn-common/BD-default&#39;, &#39;enableRogueExceptMac&#39;: &#39;no&#39;, &#39;epClear&#39;: &#39;no&#39;, &#39;epMoveDetectMode&#39;: &#39;&#39;, &#39;extMngdBy&#39;: &#39;&#39;, &#39;hostBasedRouting&#39;: &#39;no&#39;, &#39;intersiteBumTrafficAllow&#39;: &#39;no&#39;, &#39;intersiteL2Stretch&#39;: &#39;no&#39;, &#39;ipLearning&#39;: &#39;yes&#39;, &#39;ipv6McastAllow&#39;: &#39;no&#39;, &#39;lcOwn&#39;: &#39;local&#39;, &#39;limitIpLearnToSubnets&#39;: &#39;yes&#39;, &#39;llAddr&#39;: &#39;::&#39;, &#39;mac&#39;: &#39;00:22:BD:F8:19:FF&#39;, &#39;mcastARPDrop&#39;: &#39;yes&#39;, &#39;mcastAllow&#39;: &#39;no&#39;, &#39;modTs&#39;: &#39;2023-11-04T17:52:40.450+00:00&#39;, &#39;monPolDn&#39;: &#39;uni/tn-common/monepg-default&#39;, &#39;mtu&#39;: &#39;inherit&#39;, &#39;multiDstPktAct&#39;: &#39;bd-flood&#39;, &#39;name&#39;: &#39;default&#39;, &#39;nameAlias&#39;: &#39;&#39;, &#39;ownerKey&#39;: &#39;&#39;, &#39;ownerTag&#39;: &#39;&#39;, &#39;pcTag&#39;: &#39;32770&#39;, &#39;scope&#39;: &#39;2654208&#39;, &#39;seg&#39;: &#39;15826914&#39;, &#39;status&#39;: &#39;&#39;, &#39;type&#39;: &#39;regular&#39;, &#39;uid&#39;: &#39;0&#39;, &#39;unicastRoute&#39;: &#39;yes&#39;, &#39;unkMacUcastAct&#39;: &#39;proxy&#39;, &#39;unkMcastAct&#39;: &#39;flood&#39;, &#39;userdom&#39;: &#39;all&#39;, &#39;v6unkMcastAct&#39;: &#39;flood&#39;, &#39;vmac&#39;: &#39;not-applicable&#39;}}}, {&#39;fvBD&#39;: {&#39;attributes&#39;: {&#39;OptimizeWanBandwidth&#39;: &#39;no&#39;, &#39;annotation&#39;: &#39;&#39;, &#39;arpFlood&#39;: &#39;no&#39;, &#39;bcastP&#39;: &#39;225.1.41.144&#39;, &#39;childAction&#39;: &#39;&#39;, &#39;configIssues&#39;: &#39;&#39;, &#39;descr&#39;: &#39;&#39;, &#39;dn&#39;: &#39;uni/tn-infra/BD-ave-ctrl&#39;, &#39;enableRogueExceptMac&#39;: &#39;no&#39;, &#39;epClear&#39;: &#39;no&#39;, &#39;epMoveDetectMode&#39;: &#39;&#39;, &#39;extMngdBy&#39;: &#39;&#39;, &#39;hostBasedRouting&#39;: &#39;no&#39;, &#39;intersiteBumTrafficAllow&#39;: &#39;no&#39;, &#39;intersiteL2Stretch&#39;: &#39;no&#39;, &#39;ipLearning&#39;: &#39;yes&#39;, &#39;ipv6McastAllow&#39;: &#39;no&#39;, &#39;lcOwn&#39;: &#39;local&#39;, &#39;limitIpLearnToSubnets&#39;: &#39;yes&#39;, &#39;llAddr&#39;: &#39;::&#39;, &#39;mac&#39;: &#39;00:22:BD:F8:19:FF&#39;, &#39;mcastARPDrop&#39;: &#39;yes&#39;, &#39;mcastAllow&#39;: &#39;no&#39;, &#39;modTs&#39;: &#39;2023-11-04T17:52:40.450+00:00&#39;, &#39;monPolDn&#39;: &#39;uni/tn-common/monepg-default&#39;, &#39;mtu&#39;: &#39;inherit&#39;, &#39;multiDstPktAct&#39;: &#39;bd-flood&#39;, &#39;name&#39;: &#39;ave-ctrl&#39;, &#39;nameAlias&#39;: &#39;&#39;, &#39;ownerKey&#39;: &#39;&#39;, &#39;ownerTag&#39;: &#39;&#39;, &#39;pcTag&#39;: &#39;32771&#39;, &#39;scope&#39;: &#39;2424832&#39;, &#39;seg&#39;: &#39;16482194&#39;, &#39;status&#39;: &#39;&#39;, &#39;type&#39;: &#39;regular&#39;, &#39;uid&#39;: &#39;0&#39;, &#39;unicastRoute&#39;: &#39;yes&#39;, &#39;unkMacUcastAct&#39;: &#39;proxy&#39;, &#39;unkMcastAct&#39;: &#39;flood&#39;, &#39;userdom&#39;: &#39;all&#39;, &#39;v6unkMcastAct&#39;: &#39;flood&#39;, &#39;vmac&#39;: &#39;not-applicable&#39;}}}, {&#39;fvBD&#39;: {&#39;attributes&#39;: {&#39;OptimizeWanBandwidth&#39;: &#39;no&#39;, &#39;annotation&#39;: &#39;&#39;, &#39;arpFlood&#39;: &#39;no&#39;, &#39;bcastP&#39;: &#39;225.0.0.16&#39;, &#39;childAction&#39;: &#39;&#39;, &#39;configIssues&#39;: &#39;&#39;, &#39;descr&#39;: &#39;&#39;, &#39;dn&#39;: &#39;uni/tn-infra/BD-default&#39;, &#39;enableRogueExceptMac&#39;: &#39;no&#39;, &#39;epClear&#39;: &#39;no&#39;, &#39;epMoveDetectMode&#39;: &#39;&#39;, &#39;extMngdBy&#39;: &#39;&#39;, &#39;hostBasedRouting&#39;: &#39;no&#39;, &#39;intersiteBumTrafficAllow&#39;: &#39;no&#39;, &#39;intersiteL2Stretch&#39;: &#39;no&#39;, &#39;ipLearning&#39;: &#39;yes&#39;, &#39;ipv6McastAllow&#39;: &#39;no&#39;, &#39;lcOwn&#39;: &#39;local&#39;, &#39;limitIpLearnToSubnets&#39;: &#39;yes&#39;, &#39;llAddr&#39;: &#39;::&#39;, &#39;mac&#39;: &#39;00:22:BD:F8:19:FF&#39;, &#39;mcastARPDrop&#39;: &#39;yes&#39;, &#39;mcastAllow&#39;: &#39;no&#39;, &#39;modTs&#39;: &#39;2023-11-04T17:52:25.606+00:00&#39;, &#39;monPolDn&#39;: &#39;uni/tn-common/monepg-default&#39;, &#39;mtu&#39;: &#39;inherit&#39;, &#39;multiDstPktAct&#39;: &#39;bd-flood&#39;, &#39;name&#39;: &#39;default&#39;, &#39;nameAlias&#39;: &#39;&#39;, &#39;ownerKey&#39;: &#39;&#39;, &#39;ownerTag&#39;: &#39;&#39;, &#39;pcTag&#39;: &#39;49154&#39;, &#39;scope&#39;: &#39;16777199&#39;, &#39;seg&#39;: &#39;16777209&#39;, &#39;status&#39;: &#39;&#39;, &#39;type&#39;: &#39;regular&#39;, &#39;uid&#39;: &#39;0&#39;, &#39;unicastRoute&#39;: &#39;yes&#39;, &#39;unkMacUcastAct&#39;: &#39;proxy&#39;, &#39;unkMcastAct&#39;: &#39;flood&#39;, &#39;userdom&#39;: &#39;all&#39;, &#39;v6unkMcastAct&#39;: &#39;flood&#39;, &#39;vmac&#39;: &#39;not-applicable&#39;}}}, {&#39;fvBD&#39;: {&#39;attributes&#39;: {&#39;OptimizeWanBandwidth&#39;: &#39;no&#39;, &#39;annotation&#39;: &#39;&#39;, &#39;arpFlood&#39;: &#39;no&#39;, &#39;bcastP&#39;: &#39;225.0.45.128&#39;, &#39;childAction&#39;: &#39;&#39;, &#39;configIssues&#39;: &#39;&#39;, &#39;descr&#39;: &#39;&#39;, &#39;dn&#39;: &#39;uni/tn-common/BD-BD_VLAN0005&#39;, &#39;enableRogueExceptMac&#39;: &#39;no&#39;, &#39;epClear&#39;: &#39;no&#39;, &#39;epMoveDetectMode&#39;: &#39;&#39;, &#39;extMngdBy&#39;: &#39;&#39;, &#39;hostBasedRouting&#39;: &#39;no&#39;, &#39;intersiteBumTrafficAllow&#39;: &#39;no&#39;, &#39;intersiteL2Stretch&#39;: &#39;no&#39;, &#39;ipLearning&#39;: &#39;yes&#39;, &#39;ipv6McastAllow&#39;: &#39;no&#39;, &#39;lcOwn&#39;: &#39;local&#39;, &#39;limitIpLearnToSubnets&#39;: &#39;yes&#39;, &#39;llAddr&#39;: &#39;::&#39;, &#39;mac&#39;: &#39;00:22:BD:F8:19:FF&#39;, &#39;mcastARPDrop&#39;: &#39;yes&#39;, &#39;mcastAllow&#39;: &#39;no&#39;, &#39;modTs&#39;: &#39;2023-11-29T07:46:21.447+00:00&#39;, &#39;monPolDn&#39;: &#39;uni/tn-common/monepg-default&#39;, &#39;mtu&#39;: &#39;inherit&#39;, &#39;multiDstPktAct&#39;: &#39;bd-flood&#39;, &#39;name&#39;: &#39;BD_VLAN0005&#39;, &#39;nameAlias&#39;: &#39;&#39;, &#39;ownerKey&#39;: &#39;&#39;, &#39;ownerTag&#39;: &#39;&#39;, &#39;pcTag&#39;: &#39;any&#39;, &#39;scope&#39;: &#39;0&#39;, &#39;seg&#39;: &#39;16187318&#39;, &#39;status&#39;: &#39;&#39;, &#39;type&#39;: &#39;regular&#39;, &#39;uid&#39;: &#39;15374&#39;, &#39;unicastRoute&#39;: &#39;yes&#39;, &#39;unkMacUcastAct&#39;: &#39;proxy&#39;, &#39;unkMcastAct&#39;: &#39;flood&#39;, &#39;userdom&#39;: &#39;:all:&#39;, &#39;v6unkMcastAct&#39;: &#39;flood&#39;, &#39;vmac&#39;: &#39;not-applicable&#39;}}}, {&#39;fvBD&#39;: {&#39;attributes&#39;: {&#39;OptimizeWanBandwidth&#39;: &#39;no&#39;, &#39;annotation&#39;: &#39;&#39;, &#39;arpFlood&#39;: &#39;yes&#39;, &#39;bcastP&#39;: &#39;225.0.150.16&#39;, &#39;childAction&#39;: &#39;&#39;, &#39;configIssues&#39;: &#39;&#39;, &#39;descr&#39;: &#39;&#39;, &#39;dn&#39;: &#39;uni/tn-demo/BD-demo_bd&#39;, &#39;enableRogueExceptMac&#39;: &#39;no&#39;, &#39;epClear&#39;: &#39;no&#39;, &#39;epMoveDetectMode&#39;: &#39;&#39;, &#39;extMngdBy&#39;: &#39;&#39;, &#39;hostBasedRouting&#39;: &#39;no&#39;, &#39;intersiteBumTrafficAllow&#39;: &#39;no&#39;, &#39;intersiteL2Stretch&#39;: &#39;no&#39;, &#39;ipLearning&#39;: &#39;yes&#39;, &#39;ipv6McastAllow&#39;: &#39;no&#39;, &#39;lcOwn&#39;: &#39;local&#39;, &#39;limitIpLearnToSubnets&#39;: &#39;yes&#39;, &#39;llAddr&#39;: &#39;::&#39;, &#39;mac&#39;: &#39;00:22:BD:F8:19:FF&#39;, &#39;mcastARPDrop&#39;: &#39;yes&#39;, &#39;mcastAllow&#39;: &#39;no&#39;, &#39;modTs&#39;: &#39;2023-12-01T07:12:16.706+00:00&#39;, &#39;monPolDn&#39;: &#39;uni/tn-common/monepg-default&#39;, &#39;mtu&#39;: &#39;inherit&#39;, &#39;multiDstPktAct&#39;: &#39;bd-flood&#39;, &#39;name&#39;: &#39;demo_bd&#39;, &#39;nameAlias&#39;: &#39;&#39;, &#39;ownerKey&#39;: &#39;&#39;, &#39;ownerTag&#39;: &#39;&#39;, &#39;pcTag&#39;: &#39;16389&#39;, &#39;scope&#39;: &#39;3047424&#39;, &#39;seg&#39;: &#39;16711542&#39;, &#39;status&#39;: &#39;&#39;, &#39;type&#39;: &#39;regular&#39;, &#39;uid&#39;: &#39;15374&#39;, &#39;unicastRoute&#39;: &#39;yes&#39;, &#39;unkMacUcastAct&#39;: &#39;proxy&#39;, &#39;unkMcastAct&#39;: &#39;flood&#39;, &#39;userdom&#39;: &#39;:all:&#39;, &#39;v6unkMcastAct&#39;: &#39;flood&#39;, &#39;vmac&#39;: &#39;not-applicable&#39;}}}, {&#39;fvBD&#39;: {&#39;attributes&#39;: {&#39;OptimizeWanBandwidth&#39;: &#39;no&#39;, &#39;annotation&#39;: &#39;&#39;, &#39;arpFlood&#39;: &#39;yes&#39;, &#39;bcastP&#39;: &#39;225.0.192.48&#39;, &#39;childAction&#39;: &#39;&#39;, &#39;configIssues&#39;: &#39;&#39;, &#39;descr&#39;: &#39;&#39;, &#39;dn&#39;: &#39;uni/tn-demo/BD-BD_VLAN0005&#39;, &#39;enableRogueExceptMac&#39;: &#39;no&#39;, &#39;epClear&#39;: &#39;no&#39;, &#39;epMoveDetectMode&#39;: &#39;garp&#39;, &#39;extMngdBy&#39;: &#39;&#39;, &#39;hostBasedRouting&#39;: &#39;no&#39;, &#39;intersiteBumTrafficAllow&#39;: &#39;no&#39;, &#39;intersiteL2Stretch&#39;: &#39;no&#39;, &#39;ipLearning&#39;: &#39;yes&#39;, &#39;ipv6McastAllow&#39;: &#39;no&#39;, &#39;lcOwn&#39;: &#39;local&#39;, &#39;limitIpLearnToSubnets&#39;: &#39;yes&#39;, &#39;llAddr&#39;: &#39;::&#39;, &#39;mac&#39;: &#39;00:22:BD:F8:19:FF&#39;, &#39;mcastARPDrop&#39;: &#39;yes&#39;, &#39;mcastAllow&#39;: &#39;no&#39;, &#39;modTs&#39;: &#39;2023-12-01T09:24:08.731+00:00&#39;, &#39;monPolDn&#39;: &#39;uni/tn-common/monepg-default&#39;, &#39;mtu&#39;: &#39;inherit&#39;, &#39;multiDstPktAct&#39;: &#39;bd-flood&#39;, &#39;name&#39;: &#39;BD_VLAN0005&#39;, &#39;nameAlias&#39;: &#39;&#39;, &#39;ownerKey&#39;: &#39;&#39;, &#39;ownerTag&#39;: &#39;&#39;, &#39;pcTag&#39;: &#39;any&#39;, &#39;scope&#39;: &#39;0&#39;, &#39;seg&#39;: &#39;15105996&#39;, &#39;status&#39;: &#39;&#39;, &#39;type&#39;: &#39;regular&#39;, &#39;uid&#39;: &#39;15374&#39;, &#39;unicastRoute&#39;: &#39;yes&#39;, &#39;unkMacUcastAct&#39;: &#39;flood&#39;, &#39;unkMcastAct&#39;: &#39;flood&#39;, &#39;userdom&#39;: &#39;:all:&#39;, &#39;v6unkMcastAct&#39;: &#39;flood&#39;, &#39;vmac&#39;: &#39;not-applicable&#39;}}}]
</span></span><span style="display:flex;"><span>Here are the Bridge Domains (BDs) with Unicast Routing (UR) enabled:
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>1. BD Name: inb, Tenant: mgmt, DN: uni/tn-mgmt/BD-inb
</span></span><span style="display:flex;"><span>2. BD Name: default, Tenant: common, DN: uni/tn-common/BD-default
</span></span><span style="display:flex;"><span>3. BD Name: ave-ctrl, Tenant: infra, DN: uni/tn-infra/BD-ave-ctrl
</span></span><span style="display:flex;"><span>4. BD Name: default, Tenant: infra, DN: uni/tn-infra/BD-default
</span></span><span style="display:flex;"><span>5. BD Name: BD_VLAN0005, Tenant: common, DN: uni/tn-common/BD-BD_VLAN0005
</span></span><span style="display:flex;"><span>6. BD Name: demo_bd, Tenant: demo, DN: uni/tn-demo/BD-demo_bd
</span></span><span style="display:flex;"><span>7. BD Name: BD_VLAN0005, Tenant: demo, DN: uni/tn-demo/BD-BD_VLAN0005
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Please note that the DN (Distinguished Name) is the unique identifier for each BD in the ACI fabric.
</span></span></code></pre></div><h2 id="challenges">Challenges<a hidden class="anchor" aria-hidden="true" href="#challenges">#</a></h2>
<h3 id="the-main-challenge">The Main Challenge<a hidden class="anchor" aria-hidden="true" href="#the-main-challenge">#</a></h3>
<p>Despite the smooth appearance of the demonstrated process, one of the most time-consuming challenges was guiding ChatGPT to correctly understand and apply exceptions in the context of configuration guidelines.</p>
<p>Consider the following statements from our configuration guidelines:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>* All new objects that the user wants to create shall be in all caps, 
</span></span><span style="display:flex;"><span>no CamelCase or lowercase allowed.
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>* All new objects that the user wants to create shall be in all caps, 
</span></span><span style="display:flex;"><span>no CamelCase or lowercase allowed. e.g. VRF_PROD
</span></span></code></pre></div><p>The only difference between these statements is the addition of <code>e.g. VRF_PROD</code> in the second guideline. This seemingly minor variation led ChatGPT to capitalize both Tenant and VRF names even though they are existing objects, as shown in the following interaction:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>How can I assist you today? =&gt; add vlan5 to tenant demo use vrf vrf_demo, subnet 192.168.1.1/24, subnet should be shared across vrf
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>==Response==
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Making function call....  {
</span></span><span style="display:flex;"><span>  &#34;name&#34;: &#34;get_configuration_guideline&#34;,
</span></span><span style="display:flex;"><span>  &#34;arguments&#34;: &#34;{\n\&#34;query\&#34;: \&#34;add vlan5 to tenant demo use vrf vrf_demo, subnet 192.168.1.1/24, subnet should be shared across vrf\&#34;\n}&#34;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    Think step by step when answering user query following the configuration guidelines
</span></span><span style="display:flex;"><span>    If no guideline provided for a specific policy, do not proceed and let the user know a policy is missing
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    Step 1. Follow system instruction
</span></span><span style="display:flex;"><span>    Step 2. Follow additional instruction: 
</span></span><span style="display:flex;"><span>&lt;snip&gt;
</span></span><span style="display:flex;"><span>* All new objects that the user wants to create shall be in all caps, 
</span></span><span style="display:flex;"><span>no CamelCase or lowercase allowed. e.g. VRF_PROD
</span></span><span style="display:flex;"><span>&lt;snip&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span>Based on the configuration guidelines, here is the configuration to add vlan5 to tenant demo using vrf vrf_demo with subnet 192.168.1.1/24:
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>* Tenant Name: DEMO        &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;
</span></span><span style="display:flex;"><span>* Bridge Domain Name: BD_VLAN0005
</span></span><span style="display:flex;"><span>* VRF Name: VRF_DEMO       &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;
</span></span><span style="display:flex;"><span>* Unicast Routing: Yes
</span></span><span style="display:flex;"><span>* GARP: Enabled
</span></span><span style="display:flex;"><span>* L2 Unknown Unicast: Flood
</span></span><span style="display:flex;"><span>* ARP Flooding: Yes
</span></span><span style="display:flex;"><span>* L3Out: OSPF_L3OUT
</span></span><span style="display:flex;"><span>* Subnets: 192.168.1.1/24|yes|public+shared
</span></span></code></pre></div><p>Interestingly and frustratingly, we can guide and reason with ChatGPT to correct its mistake. As shown below:</p>
<p><strong>Me</strong>: Why are the Tenant&rsquo;s name and VRF&rsquo;s name capitalized?</p>
<p><strong>ChatGPT</strong>: The configuration guidelines specify that all new objects that the user wants to create should be in all caps. This includes the Tenant name and VRF name. This is a standard naming convention to maintain consistency and avoid confusion. It also helps in easily identifying and differentiating between different objects in the network.</p>
<p><strong>Me</strong>: but Tenant and VRF are existing objects, aren&rsquo;t they? The configuration guideline should only apply to new objects</p>
<p><strong>ChatGPT</strong>: You&rsquo;re correct, my apologies for the confusion. The configuration guidelines apply to new objects being created. If the Tenant and VRF are existing objects, we should use their existing names. Let&rsquo;s correct the configuration:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>* Tenant Name: demo
</span></span><span style="display:flex;"><span>* Bridge Domain Name: BD_VLAN0005
</span></span><span style="display:flex;"><span>* VRF Name: vrf_demo
</span></span><span style="display:flex;"><span>* Unicast Routing: Yes
</span></span><span style="display:flex;"><span>* GARP: Enabled
</span></span><span style="display:flex;"><span>* L2 Unknown Unicast: Flood
</span></span><span style="display:flex;"><span>* ARP Flooding: Yes
</span></span><span style="display:flex;"><span>* L3Out: OSPF_L3OUT
</span></span><span style="display:flex;"><span>* Subnets: 192.168.1.1/24|yes|public+shared
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Please confirm if you would like to proceed with this configuration.
</span></span></code></pre></div><p>ChatGPT was quick to recognize its mistake. However, various approaches to prevent this misunderstanding initially failed. Why?</p>
<p>This issue likely stems from how ChatGPT has been trained and its consequent interpretation of context. During training scenarios where creating new objects might have involved more capitalization examples, it can lead the model to generalize on such a pattern.</p>
<p>Therefore, in our case, the inclusion of <code>e.g. VRF_PROD</code> might have been perceived as a reinforcement to apply capitalization broadly, leading to capitalizing existing objects incorrectly.</p>
<p>This highlights the critical importance of understanding how Generative AI models work and implementing technical safeguards. Such measures are vital when training examples might not adequately address specific contextual subtleties.</p>
<h3 id="other-minor-challenges">Other Minor Challenges<a hidden class="anchor" aria-hidden="true" href="#other-minor-challenges">#</a></h3>
<ul>
<li>
<p><strong>Inconsistencies when Applying Complex Configurations</strong>: ChatGPT sometimes struggles with complex configuration requests. For example, when creating a subnet shared across VRFs, ChatGPT occasionally omits the shared flag.</p>
</li>
<li>
<p><strong>Inconsistencies in Adhering Global Instructions</strong>: ChatGPT didn&rsquo;t always follow global instructions as expected when provided with configuration guidelines. It required more explicit steps:</p>
</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>Step 1. Follow system instruction
</span></span><span style="display:flex;"><span>Step 2. Follow additional instruction:
</span></span></code></pre></div><ul>
<li><strong>Lack of Document Retrieval Accuracy</strong>: There is significant room to improve document retrieval accuracy. Various algorithms can be applied for this purpose, and strategies for chunking and embedding are also crucial.</li>
</ul>
<h2 id="conclusion">Conclusion<a hidden class="anchor" aria-hidden="true" href="#conclusion">#</a></h2>
<p>In this article we delved into RAG, vector embeddings, and vector databases, illustrating their use in extending LLM capabilities for enforcing ACI policy standards. We demonstrated how RAG can retrieve relevant information from vector databases, align user intentions with policy standards, and offer valuable recommendations. This methodology reduces hallucinations and enhances configuration accuracy while retaining user-friendliness.</p>
<h2 id="one-finalthought">One Final Thought<a hidden class="anchor" aria-hidden="true" href="#one-finalthought">#</a></h2>
<p>AI isn&rsquo;t here to replace us but to augment and enhance our capabilities. The synergy between human input and AI is indispensable, especially in crafting solutions catering to a specific knowledge domain or enterprise environment.
I encourage all engineers to familiarize themselves with LLM prompt engineering and instruction tuning. This knowledge is vital to effectively guiding these models.
I hope you found this series informative and enlightening. Thank you for joining me on this journey!</p>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
    </ul>

<ul class="share-buttons">
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share Networking and LLM in the Age of AI — Pt. IV: Knowledge Retrieval using RAG on x"
            href="https://x.com/intent/tweet/?text=Networking%20and%20LLM%20in%20the%20Age%20of%20AI%20%e2%80%94%20Pt.%20IV%3a%20Knowledge%20Retrieval%20using%20RAG&amp;url=http%3a%2f%2fzhangineer.net%2fposts%2f2023-12-10-networking-and-llm-pt4%2f&amp;hashtags=">
            <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
                <path
                    d="M512 62.554 L 512 449.446 C 512 483.97 483.97 512 449.446 512 L 62.554 512 C 28.03 512 0 483.97 0 449.446 L 0 62.554 C 0 28.03 28.029 0 62.554 0 L 449.446 0 C 483.971 0 512 28.03 512 62.554 Z M 269.951 190.75 L 182.567 75.216 L 56 75.216 L 207.216 272.95 L 63.9 436.783 L 125.266 436.783 L 235.9 310.383 L 332.567 436.783 L 456 436.783 L 298.367 228.367 L 432.367 75.216 L 371.033 75.216 Z M 127.633 110 L 164.101 110 L 383.481 400.065 L 349.5 400.065 Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share Networking and LLM in the Age of AI — Pt. IV: Knowledge Retrieval using RAG on linkedin"
            href="https://www.linkedin.com/shareArticle?mini=true&amp;url=http%3a%2f%2fzhangineer.net%2fposts%2f2023-12-10-networking-and-llm-pt4%2f&amp;title=Networking%20and%20LLM%20in%20the%20Age%20of%20AI%20%e2%80%94%20Pt.%20IV%3a%20Knowledge%20Retrieval%20using%20RAG&amp;summary=Networking%20and%20LLM%20in%20the%20Age%20of%20AI%20%e2%80%94%20Pt.%20IV%3a%20Knowledge%20Retrieval%20using%20RAG&amp;source=http%3a%2f%2fzhangineer.net%2fposts%2f2023-12-10-networking-and-llm-pt4%2f">
            <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
                <path
                    d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-288.985,423.278l0,-225.717l-75.04,0l0,225.717l75.04,0Zm270.539,0l0,-129.439c0,-69.333 -37.018,-101.586 -86.381,-101.586c-39.804,0 -57.634,21.891 -67.617,37.266l0,-31.958l-75.021,0c0.995,21.181 0,225.717 0,225.717l75.02,0l0,-126.056c0,-6.748 0.486,-13.492 2.474,-18.315c5.414,-13.475 17.767,-27.434 38.494,-27.434c27.135,0 38.007,20.707 38.007,51.037l0,120.768l75.024,0Zm-307.552,-334.556c-25.674,0 -42.448,16.879 -42.448,39.002c0,21.658 16.264,39.002 41.455,39.002l0.484,0c26.165,0 42.452,-17.344 42.452,-39.002c-0.485,-22.092 -16.241,-38.954 -41.943,-39.002Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share Networking and LLM in the Age of AI — Pt. IV: Knowledge Retrieval using RAG on reddit"
            href="https://reddit.com/submit?url=http%3a%2f%2fzhangineer.net%2fposts%2f2023-12-10-networking-and-llm-pt4%2f&title=Networking%20and%20LLM%20in%20the%20Age%20of%20AI%20%e2%80%94%20Pt.%20IV%3a%20Knowledge%20Retrieval%20using%20RAG">
            <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
                <path
                    d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-3.446,265.638c0,-22.964 -18.616,-41.58 -41.58,-41.58c-11.211,0 -21.361,4.457 -28.841,11.666c-28.424,-20.508 -67.586,-33.757 -111.204,-35.278l18.941,-89.121l61.884,13.157c0.756,15.734 13.642,28.29 29.56,28.29c16.407,0 29.706,-13.299 29.706,-29.701c0,-16.403 -13.299,-29.702 -29.706,-29.702c-11.666,0 -21.657,6.792 -26.515,16.578l-69.105,-14.69c-1.922,-0.418 -3.939,-0.042 -5.585,1.036c-1.658,1.073 -2.811,2.761 -3.224,4.686l-21.152,99.438c-44.258,1.228 -84.046,14.494 -112.837,35.232c-7.468,-7.164 -17.589,-11.591 -28.757,-11.591c-22.965,0 -41.585,18.616 -41.585,41.58c0,16.896 10.095,31.41 24.568,37.918c-0.639,4.135 -0.99,8.328 -0.99,12.576c0,63.977 74.469,115.836 166.33,115.836c91.861,0 166.334,-51.859 166.334,-115.836c0,-4.218 -0.347,-8.387 -0.977,-12.493c14.564,-6.47 24.735,-21.034 24.735,-38.001Zm-119.474,108.193c-20.27,20.241 -59.115,21.816 -70.534,21.816c-11.428,0 -50.277,-1.575 -70.522,-21.82c-3.007,-3.008 -3.007,-7.882 0,-10.889c3.003,-2.999 7.882,-3.003 10.885,0c12.777,12.781 40.11,17.317 59.637,17.317c19.522,0 46.86,-4.536 59.657,-17.321c3.016,-2.999 7.886,-2.995 10.885,0.008c3.008,3.011 3.003,7.882 -0.008,10.889Zm-5.23,-48.781c-16.373,0 -29.701,-13.324 -29.701,-29.698c0,-16.381 13.328,-29.714 29.701,-29.714c16.378,0 29.706,13.333 29.706,29.714c0,16.374 -13.328,29.698 -29.706,29.698Zm-160.386,-29.702c0,-16.381 13.328,-29.71 29.714,-29.71c16.369,0 29.689,13.329 29.689,29.71c0,16.373 -13.32,29.693 -29.689,29.693c-16.386,0 -29.714,-13.32 -29.714,-29.693Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share Networking and LLM in the Age of AI — Pt. IV: Knowledge Retrieval using RAG on facebook"
            href="https://facebook.com/sharer/sharer.php?u=http%3a%2f%2fzhangineer.net%2fposts%2f2023-12-10-networking-and-llm-pt4%2f">
            <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
                <path
                    d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-106.468,0l0,-192.915l66.6,0l12.672,-82.621l-79.272,0l0,-53.617c0,-22.603 11.073,-44.636 46.58,-44.636l36.042,0l0,-70.34c0,0 -32.71,-5.582 -63.982,-5.582c-65.288,0 -107.96,39.569 -107.96,111.204l0,62.971l-72.573,0l0,82.621l72.573,0l0,192.915l-191.104,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share Networking and LLM in the Age of AI — Pt. IV: Knowledge Retrieval using RAG on whatsapp"
            href="https://api.whatsapp.com/send?text=Networking%20and%20LLM%20in%20the%20Age%20of%20AI%20%e2%80%94%20Pt.%20IV%3a%20Knowledge%20Retrieval%20using%20RAG%20-%20http%3a%2f%2fzhangineer.net%2fposts%2f2023-12-10-networking-and-llm-pt4%2f">
            <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
                <path
                    d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-58.673,127.703c-33.842,-33.881 -78.847,-52.548 -126.798,-52.568c-98.799,0 -179.21,80.405 -179.249,179.234c-0.013,31.593 8.241,62.428 23.927,89.612l-25.429,92.884l95.021,-24.925c26.181,14.28 55.659,21.807 85.658,21.816l0.074,0c98.789,0 179.206,-80.413 179.247,-179.243c0.018,-47.895 -18.61,-92.93 -52.451,-126.81Zm-126.797,275.782l-0.06,0c-26.734,-0.01 -52.954,-7.193 -75.828,-20.767l-5.441,-3.229l-56.386,14.792l15.05,-54.977l-3.542,-5.637c-14.913,-23.72 -22.791,-51.136 -22.779,-79.287c0.033,-82.142 66.867,-148.971 149.046,-148.971c39.793,0.014 77.199,15.531 105.329,43.692c28.128,28.16 43.609,65.592 43.594,105.4c-0.034,82.149 -66.866,148.983 -148.983,148.984Zm81.721,-111.581c-4.479,-2.242 -26.499,-13.075 -30.604,-14.571c-4.105,-1.495 -7.091,-2.241 -10.077,2.241c-2.986,4.483 -11.569,14.572 -14.182,17.562c-2.612,2.988 -5.225,3.364 -9.703,1.12c-4.479,-2.241 -18.91,-6.97 -36.017,-22.23c-13.314,-11.876 -22.304,-26.542 -24.916,-31.026c-2.612,-4.484 -0.279,-6.908 1.963,-9.14c2.016,-2.007 4.48,-5.232 6.719,-7.847c2.24,-2.615 2.986,-4.484 4.479,-7.472c1.493,-2.99 0.747,-5.604 -0.374,-7.846c-1.119,-2.241 -10.077,-24.288 -13.809,-33.256c-3.635,-8.733 -7.327,-7.55 -10.077,-7.688c-2.609,-0.13 -5.598,-0.158 -8.583,-0.158c-2.986,0 -7.839,1.121 -11.944,5.604c-4.105,4.484 -15.675,15.32 -15.675,37.364c0,22.046 16.048,43.342 18.287,46.332c2.24,2.99 31.582,48.227 76.511,67.627c10.685,4.615 19.028,7.371 25.533,9.434c10.728,3.41 20.492,2.929 28.209,1.775c8.605,-1.285 26.499,-10.833 30.231,-21.295c3.732,-10.464 3.732,-19.431 2.612,-21.298c-1.119,-1.869 -4.105,-2.99 -8.583,-5.232Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share Networking and LLM in the Age of AI — Pt. IV: Knowledge Retrieval using RAG on telegram"
            href="https://telegram.me/share/url?text=Networking%20and%20LLM%20in%20the%20Age%20of%20AI%20%e2%80%94%20Pt.%20IV%3a%20Knowledge%20Retrieval%20using%20RAG&amp;url=http%3a%2f%2fzhangineer.net%2fposts%2f2023-12-10-networking-and-llm-pt4%2f">
            <svg version="1.1" xml:space="preserve" viewBox="2 2 28 28" height="30px" width="30px" fill="currentColor">
                <path
                    d="M26.49,29.86H5.5a3.37,3.37,0,0,1-2.47-1,3.35,3.35,0,0,1-1-2.47V5.48A3.36,3.36,0,0,1,3,3,3.37,3.37,0,0,1,5.5,2h21A3.38,3.38,0,0,1,29,3a3.36,3.36,0,0,1,1,2.46V26.37a3.35,3.35,0,0,1-1,2.47A3.38,3.38,0,0,1,26.49,29.86Zm-5.38-6.71a.79.79,0,0,0,.85-.66L24.73,9.24a.55.55,0,0,0-.18-.46.62.62,0,0,0-.41-.17q-.08,0-16.53,6.11a.59.59,0,0,0-.41.59.57.57,0,0,0,.43.52l4,1.24,1.61,4.83a.62.62,0,0,0,.63.43.56.56,0,0,0,.4-.17L16.54,20l4.09,3A.9.9,0,0,0,21.11,23.15ZM13.8,20.71l-1.21-4q8.72-5.55,8.78-5.55c.15,0,.23,0,.23.16a.18.18,0,0,1,0,.06s-2.51,2.3-7.52,6.8Z" />
            </svg>
        </a>
    </li>
    <li>
        <a target="_blank" rel="noopener noreferrer" aria-label="share Networking and LLM in the Age of AI — Pt. IV: Knowledge Retrieval using RAG on ycombinator"
            href="https://news.ycombinator.com/submitlink?t=Networking%20and%20LLM%20in%20the%20Age%20of%20AI%20%e2%80%94%20Pt.%20IV%3a%20Knowledge%20Retrieval%20using%20RAG&u=http%3a%2f%2fzhangineer.net%2fposts%2f2023-12-10-networking-and-llm-pt4%2f">
            <svg version="1.1" xml:space="preserve" width="30px" height="30px" viewBox="0 0 512 512" fill="currentColor"
                xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape">
                <path
                    d="M449.446 0C483.971 0 512 28.03 512 62.554L512 449.446C512 483.97 483.97 512 449.446 512L62.554 512C28.03 512 0 483.97 0 449.446L0 62.554C0 28.03 28.029 0 62.554 0L449.446 0ZM183.8767 87.9921H121.8427L230.6673 292.4508V424.0079H281.3328V292.4508L390.1575 87.9921H328.1233L256 238.2489z" />
            </svg>
        </a>
    </li>
</ul>

  </footer>
</article>
    </main>
    
<footer class="footer">
        <span>&copy; 2024 <a href="http://zhangineer.net/">My Journey to AI and Networking</a></span> · 

    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a><script src="https://cdnjs.cloudflare.com/ajax/libs/medium-zoom/1.0.6/medium-zoom.min.js" integrity="sha512-N9IJRoc3LaP3NDoiGkcPa4gG94kapGpaA5Zq9/Dr04uf5TbLFU5q0o8AbRhLKUUlp8QFS2u7S+Yti0U7QtuZvQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>

<script>
const images = Array.from(document.querySelectorAll(".post-content img"));
images.forEach(img => {
  mediumZoom(img, {
    margin: 0,  
    scrollOffset: 40,  
    container: null,  
    template: null  
  });
});
</script>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerHTML = 'copy';

        function copyingDone() {
            copybutton.innerHTML = 'copied!';
            setTimeout(() => {
                copybutton.innerHTML = 'copy';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
</body>

</html>
